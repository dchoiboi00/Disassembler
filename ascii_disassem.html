<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      button {
        border: none;
        margin: none;
        font-family: "Courier New", "Courier", "monospace";
        background-color: #fcdfff;
      }
      button[onclick] {
        background-color: #f9b7ff;
      }
      button[onclick]:hover {
        background-color: #50ebec;
      }
      #assembly {
        height: 88vh;
        overflow-x: scroll;
        font-family: "Courier New", "Courier", "monospace";
        font-size: 80%;
        white-space: pre;
      }
      #source {
        height: 88vh;
        overflow-x: scroll;
        font-family: "Courier New", "Courier", "monospace";
        font-size: 80%;
        white-space: pre;
        flex-direction: col;
      }
      table {
        border-spacing: 0px;
        overflow-y: scroll;
      }
      th {
        font-size: 150%;
        vertical-align: top;
        height: 35px;
      }
      td {
        padding: 0px;
        padding-right: 15px;
      }
    </style>
  </head>
  <body>
    <script>
      // scroll line into the middle of its respective subwindow
      function reveal(line) {
        const element = document.getElementById(line);
        element.scrollIntoView({
          behavior: "auto",
          block: "center",
          inline: "center",
        });
      }
      // green-highlight aline,
      // yellow-highlight all source lines that contributed to aline,
      // and scroll sline into view
      function aclick(aline, sline) {
        const srcLines = document.querySelectorAll("span[aline]"); // slines have an aline list
        const asmLines = document.querySelectorAll("span[sline]"); // alines have an sline list
        // clear all assembly lines
        asmLines.forEach((l) => {
          l.style.backgroundColor = "white";
        });
        srcLines.forEach((sl) => {
          if (sl.matches("span[aline~=" + aline + "]")) {
            sl.style.backgroundColor = "yellow";
            asmLines.forEach((al) => {
              if (al.matches("span[sline~=" + sl.id + "]")) {
                al.style.backgroundColor = "PapayaWhip";
              }
            });
          } else {
            sl.style.backgroundColor = "white";
          }
        });
        const l = document.getElementById(aline);
        l.style.backgroundColor = "PaleGreen";
        reveal(sline);
      }
      // green-highlight sline,
      // yellow-highlight all assembly lines that correspond to sline,
      // and scroll aline into view
      function sclick(sline, aline) {
        const asmLines = document.querySelectorAll("span[sline]"); // alines have an sline list
        const srcLines = document.querySelectorAll("span[aline]"); // slines have an aline list
        // clear all source lines
        srcLines.forEach((l) => {
          l.style.backgroundColor = "white";
        });
        asmLines.forEach((l) => {
          if (l.matches("span[sline~=" + sline + "]")) {
            l.style.backgroundColor = "yellow";
          } else {
            l.style.backgroundColor = "white";
          }
        });
        const l = document.getElementById(sline);
        l.style.backgroundColor = "PaleGreen";
        reveal(aline);
      }
    </script>
    <h1>ascii</h1>
    <table>
      <tbody>
        <tr id="left">
          <th style="width: 55%">source code</th>
          <th style="width: 1%"></th>
          <th style="width: 44%">assembly</th>
        </tr>
        <tr id="">
          <td style="overflow-x: scroll; vertical-align: top">
            <div id="source">
<button>&nbsp;&nbsp;1</button> <span id="s1" aline="" style="background-color: white;">/* This program gives information about an ascii code.</span>
<button>&nbsp;&nbsp;2</button> <span id="s1" aline="" style="background-color: white;">** Its arguments are taken as octal, hex, or decimal numbers</span>
<button>&nbsp;&nbsp;3</button> <span id="s1" aline="" style="background-color: white;">** and it prints information about the character.</span>
<button>&nbsp;&nbsp;4</button> <span id="s1" aline="" style="background-color: white;">** With an argument of -, all values are printed.</span>
<button>&nbsp;&nbsp;5</button> <span id="s1" aline="" style="background-color: white;">** With no argument, ascii expects characters from the keyboard.</span>
<button>&nbsp;&nbsp;6</button> <span id="s1" aline="" style="background-color: white;">** To exit, push the same key three times in a row.</span>
<button>&nbsp;&nbsp;7</button> <span id="s1" aline="" style="background-color: white;">*/</span>
<button>&nbsp;&nbsp;8</button> <span id="s1" aline="" style="background-color: white;"></span>
<button>&nbsp;&nbsp;9</button> <span id="s1" aline="" style="background-color: white;">#include <stdlib.h></span>
<button>&nbsp;10</button> <span id="s1" aline="" style="background-color: white;">#include <stdio.h></span>
<button>&nbsp;11</button> <span id="s1" aline="" style="background-color: white;">#include <termios.h></span>
<button>&nbsp;12</button> <span id="s1" aline="" style="background-color: white;">#include <unistd.h></span>
<button>&nbsp;13</button> <span id="s1" aline="" style="background-color: white;">#include <ctype.h></span>
<button>&nbsp;14</button> <span id="s1" aline="" style="background-color: white;"></span>
<button>&nbsp;15</button> <span id="s1" aline="" style="background-color: white;">char *value[] = {</span>
<button>&nbsp;16</button> <span id="s1" aline="" style="background-color: white;">    "nul   ^@", "soh   ^A", "stx   ^B", "etx   ^C", "eot   ^D", "enq   ^E", "ack   ^F", "bel   ^G",</span>
<button>&nbsp;17</button> <span id="s1" aline="" style="background-color: white;">    "bs    ^H", "ht    ^I", "nl    ^J", "vt    ^K", "np    ^L", "cr    ^M", "so    ^N", "si    ^O",</span>
<button>&nbsp;18</button> <span id="s1" aline="" style="background-color: white;">    "dle   ^P", "dc1   ^Q", "dc2   ^R", "dc3   ^S", "dc4   ^T", "nak   ^U", "syn   ^V", "etb   ^W",</span>
<button>&nbsp;19</button> <span id="s1" aline="" style="background-color: white;">    "can   ^X", "em    ^Y", "sub   ^Z", "esc   ^[",</span>
<button>&nbsp;20</button> <span id="s1" aline="" style="background-color: white;">                "fs    ^\  ^shL", "gs    ^]  ^shM",</span>
<button>&nbsp;21</button> <span id="s1" aline="" style="background-color: white;">                "rs    ^^  ^shN",  "us    ^_  ^shO",</span>
<button>&nbsp;22</button> <span id="s1" aline="" style="background-color: white;">    "sp", "!", "\"", "#", "$", "%", "&", "'",</span>
<button>&nbsp;23</button> <span id="s1" aline="" style="background-color: white;">    "(", ")", "*", "+", ",", "-", ".", "/",</span>
<button>&nbsp;24</button> <span id="s1" aline="" style="background-color: white;">    "0", "1", "2", "3", "4", "5", "6", "7",</span>
<button>&nbsp;25</button> <span id="s1" aline="" style="background-color: white;">    "8", "9", ":", ";", "<", "=", ">", "?",</span>
<button>&nbsp;26</button> <span id="s1" aline="" style="background-color: white;">    "@", "A", "B", "C", "D", "E", "F", "G",</span>
<button>&nbsp;27</button> <span id="s1" aline="" style="background-color: white;">    "H", "I", "J", "K", "L", "M", "N", "O",</span>
<button>&nbsp;28</button> <span id="s1" aline="" style="background-color: white;">    "P", "Q", "R", "S", "T", "U", "V", "W",</span>
<button>&nbsp;29</button> <span id="s1" aline="" style="background-color: white;">    "X", "Y", "Z", "[", "\", "]", "^", "_",</span>
<button>&nbsp;30</button> <span id="s1" aline="" style="background-color: white;">    "`", "a", "b", "c", "d", "e", "f", "g",</span>
<button>&nbsp;31</button> <span id="s1" aline="" style="background-color: white;">    "h", "i", "j", "k", "l", "m", "n", "o",</span>
<button>&nbsp;32</button> <span id="s1" aline="" style="background-color: white;">    "p", "q", "r", "s", "t", "u", "v", "w",</span>
<button>&nbsp;33</button> <span id="s1" aline="" style="background-color: white;">    "x", "y", "z", "{", "|", "}", "~", "del   ^?"</span>
<button>&nbsp;34</button> <span id="s1" aline="" style="background-color: white;">};</span>
<button>&nbsp;35</button> <span id="s1" aline="" style="background-color: white;"></span>
<button>&nbsp;36</button> <span id="s1" aline="" style="background-color: white;">static void show_char(int c) {</span>
<button>&nbsp;37</button> <span id="s1" aline="" style="background-color: white;">    printf(" %#4x  %#4o  %3d    %s\n", c, c, c, value[c]);</span>
<button>&nbsp;38</button> <span id="s1" aline="" style="background-color: white;">}</span>
<button>&nbsp;39</button> <span id="s1" aline="" style="background-color: white;"></span>
<button>&nbsp;40</button> <span id="s1" aline="" style="background-color: white;">int main(int argc, char **argv) {</span>
<button>&nbsp;41</button> <span id="s1" aline="" style="background-color: white;">    struct termios orig, new;</span>
<button>&nbsp;42</button> <span id="s1" aline="" style="background-color: white;">    int base, current, last, lastlast;</span>
<button>&nbsp;43</button> <span id="s1" aline="" style="background-color: white;">    current = last = lastlast = -1;</span>
<button>&nbsp;44</button> <span id="s1" aline="" style="background-color: white;">    if (argc > 1) {</span>
<button>&nbsp;45</button> <span id="s1" aline="" style="background-color: white;">        if (*argv[1] == '-') {</span>
<button>&nbsp;46</button> <span id="s1" aline="" style="background-color: white;">            for (current = 0; current <= 127; current++)</span>
<button>&nbsp;47</button> <span id="s1" aline="" style="background-color: white;">            show_char(current);</span>
<button>&nbsp;48</button> <span id="s1" aline="" style="background-color: white;">        } else {</span>
<button>&nbsp;49</button> <span id="s1" aline="" style="background-color: white;">            for (int i = 1; i < argc; i++) {</span>
<button>&nbsp;50</button> <span id="s1" aline="" style="background-color: white;">                char *cp = argv[i];</span>
<button>&nbsp;51</button> <span id="s1" aline="" style="background-color: white;">                current = 0;</span>
<button>&nbsp;52</button> <span id="s1" aline="" style="background-color: white;">                switch (*cp) {</span>
<button>&nbsp;53</button> <span id="s1" aline="" style="background-color: white;">                case '0':</span>
<button>&nbsp;54</button> <span id="s1" aline="" style="background-color: white;">                    base = 8;</span>
<button>&nbsp;55</button> <span id="s1" aline="" style="background-color: white;">                    cp++;</span>
<button>&nbsp;56</button> <span id="s1" aline="" style="background-color: white;">                    if (*cp != 'x')</span>
<button>&nbsp;57</button> <span id="s1" aline="" style="background-color: white;">                        break;</span>
<button>&nbsp;58</button> <span id="s1" aline="" style="background-color: white;">                    /* else fall through */</span>
<button>&nbsp;59</button> <span id="s1" aline="" style="background-color: white;">                case 'x':</span>
<button>&nbsp;60</button> <span id="s1" aline="" style="background-color: white;">                    base = 16;</span>
<button>&nbsp;61</button> <span id="s1" aline="" style="background-color: white;">                    cp++;</span>
<button>&nbsp;62</button> <span id="s1" aline="" style="background-color: white;">                    break;</span>
<button>&nbsp;63</button> <span id="s1" aline="" style="background-color: white;">                default:</span>
<button>&nbsp;64</button> <span id="s1" aline="" style="background-color: white;">                    base = 10;</span>
<button>&nbsp;65</button> <span id="s1" aline="" style="background-color: white;">                }</span>
<button>&nbsp;66</button> <span id="s1" aline="" style="background-color: white;">                for (;; ++cp) {</span>
<button>&nbsp;67</button> <span id="s1" aline="" style="background-color: white;">                    int d;</span>
<button>&nbsp;68</button> <span id="s1" aline="" style="background-color: white;">                    if (!isxdigit (*cp))</span>
<button>&nbsp;69</button> <span id="s1" aline="" style="background-color: white;">                        break;</span>
<button>&nbsp;70</button> <span id="s1" aline="" style="background-color: white;">                    if (isdigit (*cp))</span>
<button>&nbsp;71</button> <span id="s1" aline="" style="background-color: white;">                        d = *cp - '0';</span>
<button>&nbsp;72</button> <span id="s1" aline="" style="background-color: white;">                    else if (isupper (*cp))</span>
<button>&nbsp;73</button> <span id="s1" aline="" style="background-color: white;">                        d = *cp - 'A' + 10;</span>
<button>&nbsp;74</button> <span id="s1" aline="" style="background-color: white;">                    else</span>
<button>&nbsp;75</button> <span id="s1" aline="" style="background-color: white;">                        d = *cp - 'a' + 10;</span>
<button>&nbsp;76</button> <span id="s1" aline="" style="background-color: white;">                    if (d > base)</span>
<button>&nbsp;77</button> <span id="s1" aline="" style="background-color: white;">                        break;</span>
<button>&nbsp;78</button> <span id="s1" aline="" style="background-color: white;">                    current = base * current + d;</span>
<button>&nbsp;79</button> <span id="s1" aline="" style="background-color: white;">                }</span>
<button>&nbsp;80</button> <span id="s1" aline="" style="background-color: white;">                if (*cp != '{source_code_placeholder}') {</span>
<button>&nbsp;81</button> <span id="s1" aline="" style="background-color: white;">                    printf("%s???\n", cp);</span>
<button>&nbsp;82</button> <span id="s1" aline="" style="background-color: white;">                    exit(1);</span>
<button>&nbsp;83</button> <span id="s1" aline="" style="background-color: white;">                }</span>
<button>&nbsp;84</button> <span id="s1" aline="" style="background-color: white;">                if (current <= 127) {</span>
<button>&nbsp;85</button> <span id="s1" aline="" style="background-color: white;">                    show_char(current);</span>
<button>&nbsp;86</button> <span id="s1" aline="" style="background-color: white;">                }</span>
<button>&nbsp;87</button> <span id="s1" aline="" style="background-color: white;">                else printf("value %s out of range\n", argv[i]);</span>
<button>&nbsp;88</button> <span id="s1" aline="" style="background-color: white;">            }</span>
<button>&nbsp;89</button> <span id="s1" aline="" style="background-color: white;">        }</span>
<button>&nbsp;90</button> <span id="s1" aline="" style="background-color: white;">    } else {</span>
<button>&nbsp;91</button> <span id="s1" aline="" style="background-color: white;">        (void) tcgetattr(2, &orig);</span>
<button>&nbsp;92</button> <span id="s1" aline="" style="background-color: white;">        new = orig;</span>
<button>&nbsp;93</button> <span id="s1" aline="" style="background-color: white;">        (void) cfmakeraw(&new);</span>
<button>&nbsp;94</button> <span id="s1" aline="" style="background-color: white;"></span>
<button>&nbsp;95</button> <span id="s1" aline="" style="background-color: white;">        (void) tcsetattr(2, TCSANOW, &new);</span>
<button>&nbsp;96</button> <span id="s1" aline="" style="background-color: white;">        while (((current = (0177 & getchar())) != last) || (current != lastlast)) {</span>
<button>&nbsp;97</button> <span id="s1" aline="" style="background-color: white;">            lastlast = last;</span>
<button>&nbsp;98</button> <span id="s1" aline="" style="background-color: white;">            last = current;</span>
<button>&nbsp;99</button> <span id="s1" aline="" style="background-color: white;">            show_char(current);</span>
<button>100</button> <span id="s1" aline="" style="background-color: white;">            putchar('\r');      // device is raw</span>
<button>101</button> <span id="s1" aline="" style="background-color: white;">        }</span>
<button>102</button> <span id="s1" aline="" style="background-color: white;">        (void) tcsetattr(2, TCSANOW, &orig);</span>
<button>103</button> <span id="s1" aline="" style="background-color: white;">    }</span>
<button>104</button> <span id="s1" aline="" style="background-color: white;">}</span>

            </div>
          </td>
          <td></td>
          <td style="overflow-x: scroll; vertical-align: top">
            <div id="assembly">
{top_text_placeholder}
{assembly_code_placeholder}
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
