<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      button {
        border: none;
        margin: none;
        font-family: "Courier New", "Courier", "monospace";
        background-color: #fcdfff;
      }
      button[onclick] {
        background-color: #f9b7ff;
      }
      button[onclick]:hover {
        background-color: #50ebec;
      }
      #assembly {
        height: 88vh;
        overflow-x: scroll;
        font-family: "Courier New", "Courier", "monospace";
        font-size: 80%;
        white-space: pre;
      }
      #source {
        height: 88vh;
        overflow-x: scroll;
        font-family: "Courier New", "Courier", "monospace";
        font-size: 80%;
        white-space: pre;
        flex-direction: col;
      }
      table {
        border-spacing: 0px;
        overflow-y: scroll;
      }
      th {
        font-size: 150%;
        vertical-align: top;
        height: 35px;
      }
      td {
        padding: 0px;
        padding-right: 15px;
      }
    </style>
  </head>
  <body>
    <script>
      // scroll line into the middle of its respective subwindow
      function reveal(line) {
        const element = document.getElementById(line);
        element.scrollIntoView({
          behavior: "auto",
          block: "center",
          inline: "center",
        });
      }
      // green-highlight aline,
      // yellow-highlight all source lines that contributed to aline,
      // and scroll sline into view
      function aclick(aline, sline) {
        const srcLines = document.querySelectorAll("span[aline]"); // slines have an aline list
        const asmLines = document.querySelectorAll("span[sline]"); // alines have an sline list
        // clear all assembly lines
        asmLines.forEach((l) => {
          l.style.backgroundColor = "white";
        });
        srcLines.forEach((sl) => {
          if (sl.matches("span[aline~=" + aline + "]")) {
            sl.style.backgroundColor = "yellow";
            asmLines.forEach((al) => {
              if (al.matches("span[sline~=" + sl.id + "]")) {
                al.style.backgroundColor = "PapayaWhip";
              }
            });
          } else {
            sl.style.backgroundColor = "white";
          }
        });
        const l = document.getElementById(aline);
        l.style.backgroundColor = "PaleGreen";
        reveal(sline);
      }
      // green-highlight sline,
      // yellow-highlight all assembly lines that correspond to sline,
      // and scroll aline into view
      function sclick(sline, aline) {
        const asmLines = document.querySelectorAll("span[sline]"); // alines have an sline list
        const srcLines = document.querySelectorAll("span[aline]"); // slines have an aline list
        // clear all source lines
        srcLines.forEach((l) => {
          l.style.backgroundColor = "white";
        });
        asmLines.forEach((l) => {
          if (l.matches("span[sline~=" + sline + "]")) {
            l.style.backgroundColor = "yellow";
          } else {
            l.style.backgroundColor = "white";
          }
        });
        const l = document.getElementById(sline);
        l.style.backgroundColor = "PaleGreen";
        reveal(aline);
      }
    </script>
    <h1>ascii</h1>
    <table>
      <tbody>
        <tr id="left">
          <th style="width: 55%">source code</th>
          <th style="width: 1%"></th>
          <th style="width: 44%">assembly</th>
        </tr>
        <tr id="">
          <td style="overflow-x: scroll; vertical-align: top">
            <div id="source">
<button>&nbsp;&nbsp;1</button> <span id="s1" aline="" style="background-color: white;">/* This program gives information about an ascii code.</span>
<button>&nbsp;&nbsp;2</button> <span id="s2" aline="" style="background-color: white;">** Its arguments are taken as octal, hex, or decimal numbers</span>
<button>&nbsp;&nbsp;3</button> <span id="s3" aline="" style="background-color: white;">** and it prints information about the character.</span>
<button>&nbsp;&nbsp;4</button> <span id="s4" aline="" style="background-color: white;">** With an argument of -, all values are printed.</span>
<button>&nbsp;&nbsp;5</button> <span id="s5" aline="" style="background-color: white;">** With no argument, ascii expects characters from the keyboard.</span>
<button>&nbsp;&nbsp;6</button> <span id="s6" aline="" style="background-color: white;">** To exit, push the same key three times in a row.</span>
<button>&nbsp;&nbsp;7</button> <span id="s7" aline="" style="background-color: white;">*/</span>
<button>&nbsp;&nbsp;8</button> <span id="s8" aline="" style="background-color: white;"></span>
<button>&nbsp;&nbsp;9</button> <span id="s9" aline="" style="background-color: white;">#include &lt;stdlib.h&gt;</span>
<button>&nbsp;10</button> <span id="s10" aline="" style="background-color: white;">#include &lt;stdio.h&gt;</span>
<button>&nbsp;11</button> <span id="s11" aline="" style="background-color: white;">#include &lt;termios.h&gt;</span>
<button>&nbsp;12</button> <span id="s12" aline="" style="background-color: white;">#include &lt;unistd.h&gt;</span>
<button>&nbsp;13</button> <span id="s13" aline="" style="background-color: white;">#include &lt;ctype.h&gt;</span>
<button>&nbsp;14</button> <span id="s14" aline="" style="background-color: white;"></span>
<button>&nbsp;15</button> <span id="s15" aline="" style="background-color: white;">char *value[] = {</span>
<button>&nbsp;16</button> <span id="s16" aline="" style="background-color: white;">    "nul   ^@", "soh   ^A", "stx   ^B", "etx   ^C", "eot   ^D", "enq   ^E", "ack   ^F", "bel   ^G",</span>
<button>&nbsp;17</button> <span id="s17" aline="" style="background-color: white;">    "bs    ^H", "ht    ^I", "nl    ^J", "vt    ^K", "np    ^L", "cr    ^M", "so    ^N", "si    ^O",</span>
<button>&nbsp;18</button> <span id="s18" aline="" style="background-color: white;">    "dle   ^P", "dc1   ^Q", "dc2   ^R", "dc3   ^S", "dc4   ^T", "nak   ^U", "syn   ^V", "etb   ^W",</span>
<button>&nbsp;19</button> <span id="s19" aline="" style="background-color: white;">    "can   ^X", "em    ^Y", "sub   ^Z", "esc   ^[",</span>
<button>&nbsp;20</button> <span id="s20" aline="" style="background-color: white;">                "fs    ^\\  ^shL", "gs    ^]  ^shM",</span>
<button>&nbsp;21</button> <span id="s21" aline="" style="background-color: white;">                "rs    ^^  ^shN",  "us    ^_  ^shO",</span>
<button>&nbsp;22</button> <span id="s22" aline="" style="background-color: white;">    "sp", "!", "\"", "#", "$", "%", "&amp;", "'",</span>
<button>&nbsp;23</button> <span id="s23" aline="" style="background-color: white;">    "(", ")", "*", "+", ",", "-", ".", "/",</span>
<button>&nbsp;24</button> <span id="s24" aline="" style="background-color: white;">    "0", "1", "2", "3", "4", "5", "6", "7",</span>
<button>&nbsp;25</button> <span id="s25" aline="" style="background-color: white;">    "8", "9", ":", ";", "&lt;", "=", "&gt;", "?",</span>
<button>&nbsp;26</button> <span id="s26" aline="" style="background-color: white;">    "@", "A", "B", "C", "D", "E", "F", "G",</span>
<button>&nbsp;27</button> <span id="s27" aline="" style="background-color: white;">    "H", "I", "J", "K", "L", "M", "N", "O",</span>
<button>&nbsp;28</button> <span id="s28" aline="" style="background-color: white;">    "P", "Q", "R", "S", "T", "U", "V", "W",</span>
<button>&nbsp;29</button> <span id="s29" aline="" style="background-color: white;">    "X", "Y", "Z", "[", "\\", "]", "^", "_",</span>
<button>&nbsp;30</button> <span id="s30" aline="" style="background-color: white;">    "`", "a", "b", "c", "d", "e", "f", "g",</span>
<button>&nbsp;31</button> <span id="s31" aline="" style="background-color: white;">    "h", "i", "j", "k", "l", "m", "n", "o",</span>
<button>&nbsp;32</button> <span id="s32" aline="" style="background-color: white;">    "p", "q", "r", "s", "t", "u", "v", "w",</span>
<button>&nbsp;33</button> <span id="s33" aline="" style="background-color: white;">    "x", "y", "z", "{", "|", "}", "~", "del   ^?"</span>
<button>&nbsp;34</button> <span id="s34" aline="" style="background-color: white;">};</span>
<button>&nbsp;35</button> <span id="s35" aline="" style="background-color: white;"></span>
<button onclick="sclick('s36','a1')">&nbsp;36</button> <span id="s36" aline="a1 a2" style="background-color: palegreen;">static void show_char(int c) {</span>
<button onclick="sclick('s37','a3')">&nbsp;37</button> <span id="s37" aline="a3 a4 a5 a6 a7 a8 a9 a10" style="background-color: white;">    printf(" %#4x  %#4o  %3d    %s\n", c, c, c, value[c]);</span>
<button onclick="sclick('s38','a11')">&nbsp;38</button> <span id="s38" aline="a11 a12" style="background-color: white;">}</span>
<button>&nbsp;39</button> <span id="s39" aline="" style="background-color: white;"></span>
<button onclick="sclick('s40','a13')">&nbsp;40</button> <span id="s40" aline="a13 a14 a15 a16 a17" style="background-color: white;">int main(int argc, char **argv) {</span>
<button onclick="sclick('s41','a18')">&nbsp;41</button> <span id="s41" aline="a18" style="background-color: white;">    struct termios orig, new;</span>
<button onclick="sclick('s42','a18')">&nbsp;42</button> <span id="s42" aline="a18" style="background-color: white;">    int base, current, last, lastlast;</span>
<button onclick="sclick('s43','a18')">&nbsp;43</button> <span id="s43" aline="a18 a113 a114" style="background-color: white;">    current = last = lastlast = -1;</span>
<button onclick="sclick('s44','a18')">&nbsp;44</button> <span id="s44" aline="a18 a19 a20 a21" style="background-color: white;">    if (argc &gt; 1) {</span>
<button onclick="sclick('s45','a22')">&nbsp;45</button> <span id="s45" aline="a22 a23 a24" style="background-color: white;">        if (*argv[1] == '-') {</span>
<button onclick="sclick('s46','a32')">&nbsp;46</button> <span id="s46" aline="a32 a35 a36 a37 a38" style="background-color: white;">            for (current = 0; current &lt;= 127; current++)</span>
<button onclick="sclick('s47','a33')">&nbsp;47</button> <span id="s47" aline="a33 a34" style="background-color: white;">            show_char(current);</span>
<button>&nbsp;48</button> <span id="s48" aline="" style="background-color: white;">        } else {</span>
<button onclick="sclick('s49','a75')">&nbsp;49</button> <span id="s49" aline="a75 a76 a77" style="background-color: white;">            for (int i = 1; i &lt; argc; i++) {</span>
<button onclick="sclick('s50','a78')">&nbsp;50</button> <span id="s50" aline="a78" style="background-color: white;">                char *cp = argv[i];</span>
<button onclick="sclick('s51','a79')">&nbsp;51</button> <span id="s51" aline="a79" style="background-color: white;">                current = 0;</span>
<button onclick="sclick('s52','a44')">&nbsp;52</button> <span id="s52" aline="a44 a79 a80 a81 a82 a83 a84 a85" style="background-color: white;">                switch (*cp) {</span>
<button>&nbsp;53</button> <span id="s53" aline="" style="background-color: white;">                case '0':</span>
<button onclick="sclick('s54','a39')">&nbsp;54</button> <span id="s54" aline="a39 a40" style="background-color: white;">                    base = 8;</span>
<button onclick="sclick('s55','a39')">&nbsp;55</button> <span id="s55" aline="a39" style="background-color: white;">                    cp++;</span>
<button onclick="sclick('s56','a40')">&nbsp;56</button> <span id="s56" aline="a40 a41 a42 a43" style="background-color: white;">                    if (*cp != 'x')</span>
<button>&nbsp;57</button> <span id="s57" aline="" style="background-color: white;">                        break;</span>
<button>&nbsp;58</button> <span id="s58" aline="" style="background-color: white;">                    /* else fall through */</span>
<button>&nbsp;59</button> <span id="s59" aline="" style="background-color: white;">                case 'x':</span>
<button onclick="sclick('s60','a30')">&nbsp;60</button> <span id="s60" aline="a30 a31 a32 a45 a46" style="background-color: white;">                    base = 16;</span>
<button onclick="sclick('s61','a45')">&nbsp;61</button> <span id="s61" aline="a45" style="background-color: white;">                    cp++;</span>
<button onclick="sclick('s62','a46')">&nbsp;62</button> <span id="s62" aline="a46 a47" style="background-color: white;">                    break;</span>
<button>&nbsp;63</button> <span id="s63" aline="" style="background-color: white;">                default:</span>
<button>&nbsp;64</button> <span id="s64" aline="" style="background-color: white;">                    base = 10;</span>
<button>&nbsp;65</button> <span id="s65" aline="" style="background-color: white;">                }</span>
<button onclick="sclick('s66','a56')">&nbsp;66</button> <span id="s66" aline="a56 a57" style="background-color: white;">                for (;; ++cp) {</span>
<button onclick="sclick('s67','a57')">&nbsp;67</button> <span id="s67" aline="a57" style="background-color: white;">                    int d;</span>
<button onclick="sclick('s68','a25')">&nbsp;68</button> <span id="s68" aline="a25 a26 a27 a28 a29 a30 a57 a58
                                                               a59 a60 a61 a86 a87 a88 a89" style="background-color: white;">                    if (!isxdigit (*cp))</span>
<button>&nbsp;69</button> <span id="s69" aline="" style="background-color: white;">                        break;</span>
<button onclick="sclick('s70','a62')">&nbsp;70</button> <span id="s70" aline="a62 a63" style="background-color: white;">                    if (isdigit (*cp))</span>
<button onclick="sclick('s71','a64')">&nbsp;71</button> <span id="s71" aline="a64 a65 a66" style="background-color: white;">                        d = *cp - '0';</span>
<button onclick="sclick('s72','a48')">&nbsp;72</button> <span id="s72" aline="a48 a49" style="background-color: white;">                    else if (isupper (*cp))</span>
<button onclick="sclick('s73','a50')">&nbsp;73</button> <span id="s73" aline="a50 a51" style="background-color: white;">                        d = *cp - 'A' + 10;</span>
<button>&nbsp;74</button> <span id="s74" aline="" style="background-color: white;">                    else</span>
<button onclick="sclick('s75','a67')">&nbsp;75</button> <span id="s75" aline="a67 a68 a69 a70" style="background-color: white;">                        d = *cp - 'a' + 10;</span>
<button onclick="sclick('s76','a52')">&nbsp;76</button> <span id="s76" aline="a52 a53" style="background-color: white;">                    if (d &gt; base)</span>
<button>&nbsp;77</button> <span id="s77" aline="" style="background-color: white;">                        break;</span>
<button onclick="sclick('s78','a54')">&nbsp;78</button> <span id="s78" aline="a54 a55 a56" style="background-color: white;">                    current = base * current + d;</span>
<button>&nbsp;79</button> <span id="s79" aline="" style="background-color: white;">                }</span>
<button onclick="sclick('s80','a70')">&nbsp;80</button> <span id="s80" aline="a70 a71" style="background-color: white;">                if (*cp != '\0') {</span>
<button onclick="sclick('s81','a89')">&nbsp;81</button> <span id="s81" aline="a89 a90 a91" style="background-color: white;">                    printf("%s???\n", cp);</span>
<button onclick="sclick('s82','a92')">&nbsp;82</button> <span id="s82" aline="a92 a93" style="background-color: white;">                    exit(1);</span>
<button>&nbsp;83</button> <span id="s83" aline="" style="background-color: white;">                }</span>
<button onclick="sclick('s84','a72')">&nbsp;84</button> <span id="s84" aline="a72 a73" style="background-color: white;">                if (current &lt;= 127) {</span>
<button onclick="sclick('s85','a74')">&nbsp;85</button> <span id="s85" aline="a74 a75" style="background-color: white;">                    show_char(current);</span>
<button>&nbsp;86</button> <span id="s86" aline="" style="background-color: white;">                }</span>
<button onclick="sclick('s87','a94')">&nbsp;87</button> <span id="s87" aline="a94 a95 a96 a97 a98 a99" style="background-color: white;">                else printf("value %s out of range\n", argv[i]);</span>
<button>&nbsp;88</button> <span id="s88" aline="" style="background-color: white;">            }</span>
<button>&nbsp;89</button> <span id="s89" aline="" style="background-color: white;">        }</span>
<button>&nbsp;90</button> <span id="s90" aline="" style="background-color: white;">    } else {</span>
<button onclick="sclick('s91','a99')">&nbsp;91</button> <span id="s91" aline="a99 a100 a101 a102" style="background-color: white;">        (void) tcgetattr(2, &amp;orig);</span>
<button onclick="sclick('s92','a103')">&nbsp;92</button> <span id="s92" aline="a103 a104 a105 a106" style="background-color: white;">        new = orig;</span>
<button onclick="sclick('s93','a107')">&nbsp;93</button> <span id="s93" aline="a107 a108" style="background-color: white;">        (void) cfmakeraw(&amp;new);</span>
<button>&nbsp;94</button> <span id="s94" aline="" style="background-color: white;"></span>
<button onclick="sclick('s95','a109')">&nbsp;95</button> <span id="s95" aline="a109 a110 a111 a112" style="background-color: white;">        (void) tcsetattr(2, TCSANOW, &amp;new);</span>
<button onclick="sclick('s96','a113')">&nbsp;96</button> <span id="s96" aline="a113 a115 a123 a125 a126 a127
                                                                          a128 a129 a130" style="background-color: white;">        while (((current = (0177 &amp; getchar())) != last) || (current != lastlast)) {</span>
<button onclick="sclick('s97','a116')">&nbsp;97</button> <span id="s97" aline="a116 a121" style="background-color: white;">            lastlast = last;</span>
<button onclick="sclick('s98','a116')">&nbsp;98</button> <span id="s98" aline="a116 a122" style="background-color: white;">            last = current;</span>
<button onclick="sclick('s99','a116')">&nbsp;99</button> <span id="s99" aline="a116 a117" style="background-color: white;">            show_char(current);</span>
<button onclick="sclick('s100','a118')">100</button> <span id="s100" aline="a118 a119 a120" style="background-color: white;">            putchar('\r');      // device is raw</span>
<button>101</button> <span id="s101" aline="" style="background-color: white;">        }</span>
<button onclick="sclick('s102','a131')">102</button> <span id="s102" aline="a131 a132 a133 a134" style="background-color: white;">        (void) tcsetattr(2, TCSANOW, &amp;orig);</span>
<button>103</button> <span id="s103" aline="" style="background-color: white;">    }</span>
<button onclick="sclick('s104','a135')">104</button> <span id="s104" aline="a135 a136 a137 a138 a139 a140 a141" style="background-color: white;">}</span>
</div>
          </td>
          <td></td>
          <td style="overflow-x: scroll; vertical-align: top">
            <div id="assembly"></div>
          </td>
        </tr>
      </tbody>
    </table>
  </body>
</html>
